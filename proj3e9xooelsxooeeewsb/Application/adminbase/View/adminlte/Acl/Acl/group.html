<link rel="stylesheet" href="{{public}}matadmin/plugins/ztree/zTreeStyle/zTreeStyle.css"/>


<div style="width: 500px;">
    <ul class="ztree" id="acl_list">

    </ul>
</div>
<form role="form"  class="data_forum">
    <input type="hidden" name="ids" id="acl_group_ids" />
    <input type="hidden" name="id" value="{{$item.id}}" />
</form>

<script src="{{public}}matadmin/plugins/ztree/jquery.ztree.all-3.5.min.js"></script>
<script type="text/javascript">
    function getCheckedNodes(e, treeId, treeNode) {
        var nodes = zTreeObj.getCheckedNodes(true);
        var aclid = '';
        for(var index in nodes) {
            if (nodes.hasOwnProperty(index)) {
                aclid = aclid + nodes[index].id + ','
            }
        }

        $("#acl_group_ids").val(aclid);
    }

    var setting = {
        check: {
            enable: true,
            chkboxType : { "Y" : "s", "N" : "ps"}
        },
        data: {
            key: {
                name: "title"
            },
            simpleData: {
                enable: true,
                pIdKey: "pid"
            }
        },
        callback: {
            onCheck: getCheckedNodes
        }
    };

    var zNodes = {{echo json_encode($menus)}};

    $(document).ready(function(){
        zTreeObj = $.fn.zTree.init($("#acl_list"), setting, zNodes);
    });

</script>